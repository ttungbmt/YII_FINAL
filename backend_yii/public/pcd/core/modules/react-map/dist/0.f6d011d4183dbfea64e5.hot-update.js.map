{"version":3,"sources":["webpack:///./modules/react-map/app/containers/App.js?9563"],"names":["Layout","initialData","all","get","then","spread","res01","res02","res03","props","dispatch","type","payload","data","srvData","state","progLayout","flashWarning","init","setState","getInitStatSXH","thongke","autoDismiss","val","k","num","parseInt","join","children","chatStatus","childContextTypes","object","mapStateToProps","ownProps","status","chat","mapDispatchToProps","App"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;;;AACA;;AAEA;;AACA;;AACA;;KAAYA,M;;;;;;;;;;;;;;;;;;;;;;;;;AAEZ,KAAIC,WAAJ;;yCACC,4BAAQ,SAAR,EAAmB,iBAAS;AACzB,SAAGA,WAAH,EAAgB,OAAOA,WAAP,CADS,CACW;;AAEpC,YAAO,gBAAMC,GAAN,CAAU,CACb,gBAAMC,GAAN,eADa,CAAV,EAGFC,IAHE,CAGG,gBAAMC,MAAN,CAAa,UAACC,KAAD,EAAQC,KAAR,EAAeC,KAAf,EAAyB;AACxCC,eAAMC,QAAN,CAAe,EAACC,MAAM,oBAAP,EAA6BC,SAASN,MAAMO,IAA5C,EAAf;;AAEAZ,kDAAkBK,MAAMO,IAAxB;AACA,gBAAOZ,WAAP;AACH,MALK,CAHH,CAAP;AASH,EAZA,C;;;;2CAkBqB;AACd,oBAAO;AACHa,0BAAS,KAAKL,KAAL,CAAWK;AADjB,cAAP;AAGH;;;AAED,kBAAYL,KAAZ,EAAkB;AAAA;;AAAA,qIACRA,KADQ;;AAEd,eAAKM,KAAL,GAAa;AACTC,yBAAY;AADH,UAAb;AAFc;AAKjB;;;;6CAEkB;AAAA,0BACiB,KAAKP,KADtB;AAAA,iBACRQ,YADQ,UACRA,YADQ;AAAA,iBACMH,OADN,UACMA,OADN;;;AAGfd,oBAAOkB,IAAP;AACA,kBAAKC,QAAL,CAAc,EAACH,YAAY,QAAb,EAAd;;AAEA;AACAC,0BAAa,KAAKG,cAAL,CAAoBN,QAAQO,OAA5B,CAAb,EAAmD,UAAnD,EAA+D,EAACC,aAAa,CAAd,EAA/D;AAEH;;;wCAEcD,O,EAAQ;AACnB,oBAAO,qBAAQ,iBAAIA,OAAJ,EAAa,UAACE,GAAD,EAAMC,CAAN,EAAY;AACpC,qBAAIC,MAAMC,SAASH,GAAT,CAAV;AACA,qBAAGE,OAAOD,KAAK,QAAf,EAAyB,OAAUD,GAAV;AACzB,qBAAGE,OAAOD,KAAK,QAAf,EAAyB,OAAUD,GAAV;AAC5B,cAJc,CAAR,EAIHI,IAJG,CAIE,IAJF,CAAP;AAKH;;;kCAEQ;AAAA,2BACoC,KAAKlB,KADzC;AAAA,iBACEmB,QADF,WACEA,QADF;AAAA,iBACYC,UADZ,WACYA,UADZ;AAAA,iBACwBnB,QADxB,WACwBA,QADxB;;;AAIL,oBACI;AAAA;AAAA,mBAAK,IAAG,SAAR;AACI,sEAAQ,IAAG,QAAX,GADJ;AAEI;AAAA;AAAA,uBAAS,IAAG,MAAZ;AAAA;AACI;AAAA;AAAA,2BAAW,IAAG,WAAd;AAA2BkB;AAA3B,sBADJ;AAEI;AAAA;AAAA,2BAAK,IAAG,SAAR;AACI,8EAAQ,IAAG,QAAX,GADJ;AAEI;AAAA;AAAA,+BAAK,IAAG,aAAR;AACI;AAAA;AAAA,mCAAK,IAAG,SAAR;AAAA;AAAA,8BADJ;AAEI;AAAA;AAAA,mCAAK,IAAG,SAAR;AACK,sCAAKb,KAAL,CAAWC,UAAX,IAAyB,QAAzB,GAAoC,2DAApC,GAAoD;AADzD,8BAFJ;AAKI;AAAA;AAAA,mCAAK,IAAG,UAAR;AAAA;AAAA;AALJ,0BAFJ;AASI;AAAA;AAAA,+BAAK,IAAG,SAAR;AAAA;AAAA;AATJ,sBAFJ;AAaI;AAAA;AAAA,2BAAK,IAAG,YAAR;AAAA;AAAA;AAbJ,kBAFJ;AAiBI,yEAjBJ;AAkBKa,8BAAa,sDAAS,UAAUnB,QAAnB,GAAb,GAA8C,IAlBnD;AAmBI;AAnBJ,cADJ;AAuBH;;;+BA/DMoB,iB,GAAoB;AACvBhB,cAAS,kBAAUiB;AADI,E;;AAkE/B,KAAMC,kBAAkB,SAAlBA,eAAkB,CAACjB,KAAD,EAAQkB,QAAR,EAAqB;AACzC,YAAO;AACHJ,qBAAYd,MAAMmB,MAAN,CAAaC;AADtB,MAAP;AAGH,EAJD;;AAMA,KAAMC,qBAAqB,SAArBA,kBAAqB,CAAC1B,QAAD,EAAc;AACrC,uCAAW,+BAAmB,EAAEO,wCAAF,EAAnB,EAAqCP,QAArC,CAAX,IAA2DA,kBAA3D;AACH,EAFD;;mBAIe,yBAAQsB,eAAR,EAAyBI,kBAAzB,EAA6C,IAA7C,EAAmDC,GAAnD,C;;AAGf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6D","file":"0.f6d011d4183dbfea64e5.hot-update.js","sourcesContent":["import React, {Component, PropTypes} from 'react';\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux';\r\nimport { resolve } from \"react-resolver\";\r\nimport axios from 'axios';\r\nimport {map, compact} from 'lodash';\r\n\r\nimport {Header, LeftPanel, Navbar, Footer, MapLayout, ChatBox, FlashNoty} from '../components';\r\nimport {flashWarning} from '../actions/flashActions';\r\nimport * as Layout from '../utils/layout';\r\n\r\nvar initialData;\r\n@resolve('srvData', props => {\r\n    if(initialData) return initialData; // Fix load router\r\n\r\n    return axios.all([\r\n        axios.get(`maps/config`),\r\n    ])\r\n        .then(axios.spread((res01, res02, res03) => {\r\n            props.dispatch({type: 'UPDATE_SERVER_DATA', payload: res01.data});\r\n\r\n            initialData = {...res01.data};\r\n            return initialData;\r\n        }));\r\n})\r\nclass App extends Component {\r\n    static childContextTypes = {\r\n        srvData: PropTypes.object,\r\n    }\r\n\r\n    getChildContext() {\r\n        return {\r\n            srvData: this.props.srvData,\r\n        }\r\n    }\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            progLayout: null,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        const {flashWarning, srvData} = this.props;\r\n\r\n        Layout.init();\r\n        this.setState({progLayout: 'loaded'});\r\n\r\n        // Thông báo ca bệnh\r\n        flashWarning(this.getInitStatSXH(srvData.thongke), 'Cảnh báo', {autoDismiss: 0})\r\n\r\n    }\r\n\r\n    getInitStatSXH(thongke){\r\n        return compact(map(thongke, (val, k) => {\r\n            let num = parseInt(val);\r\n            if(num && k == 'chuadt') return `${val} ca chưa điều tra`;\r\n            if(num && k == 'dangdt') return `${val} ca đang điều điều tra`;\r\n        })).join(', ');\r\n    }\r\n\r\n    render() {\r\n        const {children, chatStatus, dispatch} = this.props;\r\n\r\n\r\n        return (\r\n            <div id=\"wrapper\">\r\n                <Header id=\"header\"></Header>\r\n                <section id=\"main\"> {/* onmouseover=\"myLayout.allowOverflow('north')\" */}\r\n                    <LeftPanel id=\"leftPanel\">{children}</LeftPanel>\r\n                    <div id=\"content\">\r\n                        <Navbar id=\"navbar\"></Navbar>\r\n                        <div id=\"map-wrapper\">\r\n                            <div id=\"leftMap\">LEFT MAP</div>\r\n                            <div id=\"mainMap\">\r\n                                {this.state.progLayout == 'loaded' ? <MapLayout /> : 'Đang tải...'}\r\n                            </div>\r\n                            <div id=\"rightMap\">RIGHT MAP</div>\r\n                        </div>\r\n                        <div id=\"preview\">PREVIEW</div>\r\n                    </div>\r\n                    <div id=\"rightPanel\">RIGHTPANEL</div>\r\n                </section>\r\n                <Footer></Footer>\r\n                {chatStatus ? <ChatBox dispatch={dispatch}/> : null}\r\n                <FlashNoty />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        chatStatus: state.status.chat,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {...bindActionCreators({ flashWarning }, dispatch), dispatch};\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps, null)(App);\r\n\r\n\r\n// import Header from '../components/Header';\r\n// import LeftPanel from '../components/LeftPanel';\r\n// import Navbar from '../components/Navbar';\r\n// import Footer from '../components/Footer';\r\n// import MapLayout from '../components/MapLayout';\r\n// import ChatBox from '../vendor/chat/ChatBox';\r\n//\r\n// @resolve('resData', props => {\r\n//     return axios.all([axios.get(`/maps/config`)])\r\n//         .then(axios.spread((res01) => {\r\n//             return {...res01.data};\r\n//         }));\r\n// })\r\n// class App extends Component {\r\n//     state = {\r\n//         layout: 'Loading...',\r\n//     }\r\n//\r\n//     constructor() {\r\n//         super();\r\n//         this.state = {\r\n//             openChat : false\r\n//         }\r\n//     }\r\n//\r\n//     static childContextTypes = {\r\n//         resData: PropTypes.object,\r\n//         map: PropTypes.object,\r\n//     }\r\n//\r\n//     getChildContext() {\r\n//         return {\r\n//             resData: this.props.resData,\r\n//             map: this.props.map,\r\n//         }\r\n//     }\r\n//\r\n//     componentDidMount() {\r\n//         const {thongke} = this.props.resData;\r\n//\r\n//         let updateMap = () => {\r\n//             setTimeout(() => { this.props.map.map.invalidateSize(); })\r\n//         }\r\n//\r\n//         let defaults = {\r\n//             resizeWhileDragging: true,\r\n//             spacing_open: 5,\r\n//             spacing_closed: 5,\r\n//             resizerDragOpacity: 0.3, // Độ mờ resize(Tắt resizeWhileDragging),\r\n//             // onshow_end: updateMap,\r\n//             // onhide_end: updateMap,\r\n//             onresize_end: updateMap,\r\n//             // onclose_end: updateMap,\r\n//             // onopen_end: updateMap,\r\n//         };\r\n//\r\n//\r\n//         var myLayout = $('body').layout({\r\n//             defaults,\r\n//             north: {\r\n//                 paneSelector: '#header',\r\n//                 size: 46,\r\n//                 spacing_open: 0,\t\t\t// cosmetic spacing\r\n// //                togglerLength_open: 0,\t\t\t// HIDE the toggler button\r\n// //                resizable: false,\r\n// //                slidable: true,\r\n//                 spacing_closed: 0,\r\n// //                     showOverflowOnHover: true,\r\n//             },\r\n//             center: {\r\n//                 paneSelector: '#main',\r\n//                 childOptions: {\r\n//                     defaults: defaults,\r\n//                     west: {\r\n//                         paneSelector: '#leftPanel',\r\n//                         size: 550,\r\n//                         // showOverflowOnHover: true,\r\n//                     },\r\n//                     center: {\r\n//                         defaults: defaults,\r\n//                         paneSelector: '#content',\r\n//\r\n//                         childOptions: {\r\n//                             defaults: defaults,\r\n//                             north: {\r\n//                                 paneSelector: '#navbar',\r\n//                                 size: 42,\r\n//                                 spacing_open: 0,\t\t\t// cosmetic spacing\r\n//                                 spacing_closed: 0,\r\n//                                 // showOverflowOnHover: true,\r\n//                             },\r\n//                             center: {\r\n//                                 paneSelector: '#map-wrapper',\r\n//                                 childOptions: {\r\n//                                     defaults: defaults,\r\n//                                     west: {\r\n//                                         paneSelector: '#leftMap',\r\n//                                         spacing_closed: 0,\r\n//                                         initClosed: true,\r\n//                                     },\r\n//                                     center: {\r\n//                                         paneSelector: '#mainMap',\r\n//                                     },\r\n//                                     east: {\r\n//                                         paneSelector: '#rightMap',\r\n//                                         initClosed: true,\r\n//                                         spacing_closed: 0,\r\n//                                     },\r\n//                                 }\r\n//                             },\r\n//\r\n//                             south: {\r\n//                                 paneSelector: '#preview',\r\n//                                 size: 140,\r\n//                                 initClosed: true,\r\n//                                 spacing_closed: 0,\r\n//                             }\r\n//                         }\r\n//                     },\r\n//                     east: {\r\n//                         paneSelector: '#rightPanel',\r\n//                         initClosed: true,\r\n//                         spacing_closed: 0,\r\n//                     },\r\n//                 }\r\n//             },\r\n//             south: {\r\n//                 paneSelector: '#footer',\r\n//                 initClosed: true,\r\n//                 spacing_closed: 0,\r\n//             }\r\n//         });\r\n//\r\n//\r\n//         let appLayout = myLayout,\r\n//             mainLayout = myLayout.center.children.layout1,\r\n//             contentLayout = mainLayout.center.children.layout1,\r\n//             mapLayout = contentLayout.center.children.layout1;\r\n//\r\n//         window.appLayout = {root: myLayout, main: mainLayout, content: contentLayout, map: mapLayout};\r\n//\r\n//         this.setState({layout: 'loaded'});\r\n//\r\n//         $('#leftPanel').perfectScrollbar();\r\n//         $('.table-responsive').perfectScrollbar();\r\n//\r\n//\r\n//         var sbToggled = document.getElementById('navHeader');\r\n//         var gesture = new Hammer(sbToggled);\r\n//         gesture.on('swipeleft swiperight', function(e) {\r\n//             const {type} = e;\r\n//             if(type == 'swipeleft') window.appLayout.main.close('west');\r\n//             if(type == 'swiperight') window.appLayout.main.open('west');\r\n//         });\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//         // $(\".load-ajax-content\").each(function () {\r\n//         //     let self = $(this);\r\n//         //     let url = $(this).attr('data-url');\r\n//         //     let progress = `<div class=\"progress m-5\"> <div class=\"progress-bar progress-bar-striped active\" style=\"width: 100%\"><span class=\"sr-only\">100% Đang tải</span> </div> </div>`;\r\n//         //\r\n//         //     self\r\n//         //         .html(progress)\r\n//         //         .load(url, (res, status, xhr) => {\r\n//         //             xhr\r\n//         //                 .done(() => {\r\n//         //                     self.html(res);\r\n//         //                 })\r\n//         //                 .fail(() => {\r\n//         //                     self.html('Tải dữ liệu thất bại')\r\n//         //                 })\r\n//         //         })\r\n//         // });\r\n//\r\n//\r\n//\r\n//         // Thống kê ca bệnh\r\n//         if(parseInt(thongke.chuadt) || parseInt(thongke.dangdt)){\r\n//             this.refs.noty.addNotification({\r\n//                 title: 'Cảnh báo',\r\n//                 level: 'warning',\r\n//                 message: this.getMessage(thongke),\r\n//                 autoDismiss: 0,\r\n//                 action: {\r\n//                     label: 'Cập nhật ngay',\r\n//                     callback: function() {\r\n//                         window.open(url_home('/dichte/cabenh/index'));\r\n//                     }\r\n//                 }\r\n//             });\r\n//         }\r\n//     }\r\n//\r\n//     getMessage(thongke){\r\n//         let arr = [];\r\n//         if(parseInt(thongke.chuadt)) arr.push(`${thongke.chuadt} ca chưa điều tra`);\r\n//         if(parseInt(thongke.dangdt)) arr.push(`${thongke.dangdt} ca đang điều tra`);\r\n//         return arr.join(', ');\r\n//     }\r\n//\r\n//\r\n//\r\n//     componentDidUpdate(prevProps, prevState) {\r\n//         const {noty} = this.props\r\n//\r\n//         if(noty && noty != prevProps.noty){\r\n//             this.refs.noty.addNotification(noty);\r\n//         }\r\n//\r\n//     }\r\n//\r\n//\r\n//     openChat(){\r\n//         this.setState({openChat: true})\r\n//     }\r\n//\r\n//     closeChat(){\r\n//         this.setState({openChat: false})\r\n//     }\r\n//\r\n//     render() {\r\n//\r\n//\r\n//         return (\r\n//             <div id=\"wrapper\">\r\n//                 <Header openChat={::this.openChat}></Header>\r\n//                 <section id=\"main\"> {/* onmouseover=\"myLayout.allowOverflow('north')\" */}\r\n//                     <LeftPanel></LeftPanel>\r\n//                     <div id=\"content\">\r\n//                         <Navbar></Navbar>\r\n//                         <div id=\"map-wrapper\">\r\n//                             <div id=\"leftMap\">LEFT MAP</div>\r\n//                             <div id=\"mainMap\">\r\n//                                 {this.state.layout == 'loaded' ? <MapLayout /> : 'Đang tải...'}\r\n//                             </div>\r\n//                             <div id=\"rightMap\">RIGHT MAP</div>\r\n//                         </div>\r\n//                         <div id=\"preview\">PREVIEW</div>\r\n//                     </div>\r\n//                     <div id=\"rightPanel\">RIGHTPANEL</div>\r\n//                 </section>\r\n//                 <Footer></Footer>\r\n//\r\n//                 {this.state.openChat ? <ChatBox closeChat={::this.closeChat} /> : null}\r\n//                 <Noty ref=\"noty\" allowHTML/>\r\n//             </div>\r\n//         )\r\n//     }\r\n// }\r\n//\r\n// const mapStateToProps = (state) => {\r\n//     return {\r\n//         server: state.server,\r\n//         noty: state.dichte.noty,\r\n//         map: state.map,\r\n//     }\r\n// }\r\n//\r\n//\r\n// export default connect(mapStateToProps, null, null)(App);\n\n\n// WEBPACK FOOTER //\n// ./modules/react-map/app/containers/App.js"],"sourceRoot":""}